var ve=Object.defineProperty;var ye=(s,e,l)=>e in s?ve(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l;var S=(s,e,l)=>(ye(s,typeof e!="symbol"?e+"":e,l),l);import{S as be,i as Ee,s as ge,k as H,a as I,q as R,J as F,l as K,m as z,h as c,c as O,r as V,K as J,n,p as te,b as E,G as b,L as ze,u as Z,H as oe,M as Ce,e as L}from"../chunks/index.7dca7197.js";class De{constructor(e){S(this,"root");S(this,"cells");this.root=e,this.cells=new Map,this.cells.set(this.root,0)}setCellDistance(e,l){this.cells.set(e,l)}max(){let e=this.root,l=0;return this.cells.forEach((t,o)=>{t>l&&(e=o,l=t)}),[e,l]}}class Ae{constructor(e,l){S(this,"id");S(this,"row");S(this,"column");S(this,"links");S(this,"north");S(this,"south");S(this,"west");S(this,"east");this.id=`${e}${l}`,this.row=e,this.column=l,this.links=new Map}link(e,l=!1){this.links.has(e.id)||(this.links.set(e.id,{cell:e,bidi:l}),l&&e.link(this,!0))}unlink(e){this.links.delete(e.id),e.links.has(this.id)&&e.unlink(this)}linked(e){return this.links.has(e.id)}neighbours(){const e=[];return this.north&&e.push(this.north),this.south&&e.push(this.south),this.east&&e.push(this.east),this.west&&e.push(this.west),e}distances(){const e=new De(this);let l=[this];for(;l.length>0;){const t=[];l.forEach(o=>{o.links.forEach(u=>{e.cells.get(u.cell)===void 0&&(e.cells.set(u.cell,e.cells.get(o)+1),t.push(u.cell))})}),l=t}return e}}function le(s,e){return Math.floor(Math.random()*(e-s+1))+s}class re{constructor(e,l){this.rows=e,this.columns=l,this.cells=[],this.grid=this.prepareGrid(),this.configureCells()}prepareGrid(){return Array.from({length:this.rows}).map((l,t)=>Array.from({length:this.columns}).map((u,r)=>{const h=new Ae(t,r);return this.cells.push(h),h}))}configureCells(){this.cells.forEach(e=>{this.grid[e.row-1]&&(e.north=this.grid[e.row-1][e.column]),this.grid[e.row+1]&&(e.south=this.grid[e.row+1][e.column]),this.grid[e.row][e.column+1]&&(e.east=this.grid[e.row][e.column+1]),this.grid[e.row][e.column-1]&&(e.west=this.grid[e.row][e.column-1])})}size(){return this.columns*this.rows}randomCell(){return this.cells[le(0,this.cells.length)]}}function ne(s){return s.grid.forEach(e=>{let l=[];e.forEach(t=>{l.push(t);const o=!t.east,u=!t.north;if(o||!u&&le(0,2)===0){const h=l[le(0,l.length-1)];h.north&&(h.link(h.north,!0),l=[])}else t.east&&t.link(t.east,!0)})}),s}function fe(s){const e=s.cells[0].distances(),[l]=e.max(),t=l.distances(),[o]=t.max();return[o,l]}function ue(s,e,l){const t=s.slice();return t[12]=e[l],t}function he(s){let e,l,t;return{c(){e=H("p"),l=R("+"),t=R(s[6]),this.h()},l(o){e=K(o,"P",{class:!0});var u=z(e);l=V(u,"+"),t=V(u,s[6]),u.forEach(c),this.h()},h(){n(e,"class","score-delta positive svelte-loez8s")},m(o,u){E(o,e,u),b(e,l),b(e,t)},p(o,u){u&64&&Z(t,o[6])},d(o){o&&c(e)}}}function ae(s){let e,l;return{c(){e=H("p"),l=R(s[6]),this.h()},l(t){e=K(t,"P",{class:!0});var o=z(e);l=V(o,s[6]),o.forEach(c),this.h()},h(){n(e,"class","score-delta negative svelte-loez8s")},m(t,o){E(t,e,o),b(e,l)},p(t,o){o&64&&Z(l,t[6])},d(t){t&&c(e)}}}function _e(s){let e;return{c(){e=H("p"),this.h()},l(l){e=K(l,"P",{class:!0}),z(e).forEach(c),this.h()},h(){n(e,"class","svelte-loez8s")},m(l,t){E(l,e,t)},d(l){l&&c(e)}}}function ce(s){let e,l,t,o,u;return{c(){e=F("line"),this.h()},l(r){e=J(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),z(e).forEach(c),this.h()},h(){n(e,"x1",l=s[12].column*f),n(e,"y1",t=s[12].row*f),n(e,"x2",o=s[12].column*f+f),n(e,"y2",u=s[12].row*f),n(e,"stroke","black"),n(e,"stroke-width","3"),n(e,"stroke-linecap","square")},m(r,h){E(r,e,h)},p(r,h){h&4&&l!==(l=r[12].column*f)&&n(e,"x1",l),h&4&&t!==(t=r[12].row*f)&&n(e,"y1",t),h&4&&o!==(o=r[12].column*f+f)&&n(e,"x2",o),h&4&&u!==(u=r[12].row*f)&&n(e,"y2",u)},d(r){r&&c(e)}}}function me(s){let e,l,t,o,u;return{c(){e=F("line"),this.h()},l(r){e=J(r,"line",{"stroke-width":!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-linecap":!0}),z(e).forEach(c),this.h()},h(){n(e,"stroke-width","3"),n(e,"x1",l=s[12].column*f+f),n(e,"y1",t=s[12].row*f),n(e,"x2",o=s[12].column*f+f),n(e,"y2",u=s[12].row*f+f),n(e,"stroke","black"),n(e,"stroke-linecap","square")},m(r,h){E(r,e,h)},p(r,h){h&4&&l!==(l=r[12].column*f+f)&&n(e,"x1",l),h&4&&t!==(t=r[12].row*f)&&n(e,"y1",t),h&4&&o!==(o=r[12].column*f+f)&&n(e,"x2",o),h&4&&u!==(u=r[12].row*f+f)&&n(e,"y2",u)},d(r){r&&c(e)}}}function we(s){let e,l,t,o,u;return{c(){e=F("line"),this.h()},l(r){e=J(r,"line",{"stroke-width":!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-linecap":!0}),z(e).forEach(c),this.h()},h(){n(e,"stroke-width","3"),n(e,"x1",l=s[12].column*f),n(e,"y1",t=s[12].row*f),n(e,"x2",o=s[12].column*f),n(e,"y2",u=s[12].row*f+f),n(e,"stroke","black"),n(e,"stroke-linecap","square")},m(r,h){E(r,e,h)},p(r,h){h&4&&l!==(l=r[12].column*f)&&n(e,"x1",l),h&4&&t!==(t=r[12].row*f)&&n(e,"y1",t),h&4&&o!==(o=r[12].column*f)&&n(e,"x2",o),h&4&&u!==(u=r[12].row*f+f)&&n(e,"y2",u)},d(r){r&&c(e)}}}function ke(s){let e,l,t,o,u;return{c(){e=F("line"),this.h()},l(r){e=J(r,"line",{"stroke-width":!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-linecap":!0}),z(e).forEach(c),this.h()},h(){n(e,"stroke-width","3"),n(e,"x1",l=s[12].column*f),n(e,"y1",t=s[12].row*f+f),n(e,"x2",o=s[12].column*f+f),n(e,"y2",u=s[12].row*f+f),n(e,"stroke","black"),n(e,"stroke-linecap","square")},m(r,h){E(r,e,h)},p(r,h){h&4&&l!==(l=r[12].column*f)&&n(e,"x1",l),h&4&&t!==(t=r[12].row*f+f)&&n(e,"y1",t),h&4&&o!==(o=r[12].column*f+f)&&n(e,"x2",o),h&4&&u!==(u=r[12].row*f+f)&&n(e,"y2",u)},d(r){r&&c(e)}}}function pe(s){let e,l,t;return{c(){e=F("circle"),this.h()},l(o){e=J(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),z(e).forEach(c),this.h()},h(){n(e,"cx",l=(s[12].column+1)*f-f/2),n(e,"cy",t=(s[12].row+1)*f-f/2),n(e,"r","7"),n(e,"fill","#009900")},m(o,u){E(o,e,u)},p(o,u){u&4&&l!==(l=(o[12].column+1)*f-f/2)&&n(e,"cx",l),u&4&&t!==(t=(o[12].row+1)*f-f/2)&&n(e,"cy",t)},d(o){o&&c(e)}}}function de(s){let e=!s[12].north||s[12].north&&!s[12].linked(s[12].north),l,t=!s[12].east||s[12].east&&!s[12].linked(s[12].east),o,u=!s[12].west||s[12].west&&!s[12].linked(s[12].west),r,h=!s[12].south||s[12].south&&!s[12].linked(s[12].south),q,P,M,a=e&&ce(s),k=t&&me(s),d=u&&we(s),p=h&&ke(s),w=s[12].id===s[3][1].id&&pe(s);return{c(){a&&a.c(),l=L(),k&&k.c(),o=L(),d&&d.c(),r=L(),p&&p.c(),q=L(),w&&w.c(),P=L(),M=L()},l(i){a&&a.l(i),l=L(),k&&k.l(i),o=L(),d&&d.l(i),r=L(),p&&p.l(i),q=L(),w&&w.l(i),P=L(),M=L()},m(i,m){a&&a.m(i,m),E(i,l,m),k&&k.m(i,m),E(i,o,m),d&&d.m(i,m),E(i,r,m),p&&p.m(i,m),E(i,q,m),w&&w.m(i,m),E(i,P,m),E(i,M,m)},p(i,m){m&4&&(e=!i[12].north||i[12].north&&!i[12].linked(i[12].north)),e?a?a.p(i,m):(a=ce(i),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),m&4&&(t=!i[12].east||i[12].east&&!i[12].linked(i[12].east)),t?k?k.p(i,m):(k=me(i),k.c(),k.m(o.parentNode,o)):k&&(k.d(1),k=null),m&4&&(u=!i[12].west||i[12].west&&!i[12].linked(i[12].west)),u?d?d.p(i,m):(d=we(i),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),m&4&&(h=!i[12].south||i[12].south&&!i[12].linked(i[12].south)),h?p?p.p(i,m):(p=ke(i),p.c(),p.m(q.parentNode,q)):p&&(p.d(1),p=null),i[12].id===i[3][1].id?w?w.p(i,m):(w=pe(i),w.c(),w.m(P.parentNode,P)):w&&(w.d(1),w=null)},d(i){a&&a.d(i),i&&c(l),k&&k.d(i),i&&c(o),d&&d.d(i),i&&c(r),p&&p.d(i),i&&c(q),w&&w.d(i),i&&c(P),i&&c(M)}}}function Pe(s){let e,l,t,o,u,r,h,q,P,M,a,k,d,p,w,i,m,Q,T,B,N,W,X,Y,$,se,C=s[6]>0&&he(s),D=s[6]<0&&ae(s),A=s[6]===0&&_e(),U=s[2].cells,g=[];for(let _=0;_<U.length;_+=1)g[_]=de(ue(s,U,_));return{c(){e=H("header"),l=H("div"),t=I(),o=H("h1"),u=R("Simply Labyrinths"),r=I(),h=H("p"),q=R("Level "),P=R(s[4]),M=I(),a=H("div"),k=H("p"),d=I(),p=H("p"),w=R(s[5]),i=I(),C&&C.c(),m=I(),D&&D.c(),Q=I(),A&&A.c(),T=I(),B=F("svg"),N=F("circle");for(let _=0;_<g.length;_+=1)g[_].c();this.h()},l(_){e=K(_,"HEADER",{class:!0});var v=z(e);l=K(v,"DIV",{}),z(l).forEach(c),t=O(v),o=K(v,"H1",{class:!0});var y=z(o);u=V(y,"Simply Labyrinths"),y.forEach(c),r=O(v),h=K(v,"P",{});var j=z(h);q=V(j,"Level "),P=V(j,s[4]),j.forEach(c),v.forEach(c),M=O(_),a=K(_,"DIV",{class:!0});var G=z(a);k=K(G,"P",{class:!0}),z(k).forEach(c),d=O(G),p=K(G,"P",{class:!0});var ie=z(p);w=V(ie,s[5]),ie.forEach(c),i=O(G),C&&C.l(G),m=O(G),D&&D.l(G),Q=O(G),A&&A.l(G),G.forEach(c),T=O(_),B=J(_,"svg",{viewBox:!0,class:!0,style:!0});var x=z(B);N=J(x,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0}),z(N).forEach(c);for(let ee=0;ee<g.length;ee+=1)g[ee].l(x);x.forEach(c),this.h()},h(){n(o,"class","svelte-loez8s"),n(e,"class","header svelte-loez8s"),n(k,"class","svelte-loez8s"),n(p,"class","score svelte-loez8s"),n(a,"class","score-info svelte-loez8s"),n(N,"class","cursor svelte-loez8s"),n(N,"cx",W=(s[7].x+1)*f-f/2),n(N,"cy",X=(s[7].y+1)*f-f/2),n(N,"r","7"),n(N,"fill","#990000"),n(B,"viewBox",Y="-5 -5 "+(f*s[1]+10)+" "+(f*s[0]+10)),n(B,"class","maze svelte-loez8s"),te(B,"margin","0 auto"),te(B,"display","block")},m(_,v){E(_,e,v),b(e,l),b(e,t),b(e,o),b(o,u),b(e,r),b(e,h),b(h,q),b(h,P),E(_,M,v),E(_,a,v),b(a,k),b(a,d),b(a,p),b(p,w),b(a,i),C&&C.m(a,null),b(a,m),D&&D.m(a,null),b(a,Q),A&&A.m(a,null),E(_,T,v),E(_,B,v),b(B,N);for(let y=0;y<g.length;y+=1)g[y]&&g[y].m(B,null);$||(se=ze(window,"keydown",s[9]),$=!0)},p(_,[v]){if(v&16&&Z(P,_[4]),v&32&&Z(w,_[5]),_[6]>0?C?C.p(_,v):(C=he(_),C.c(),C.m(a,m)):C&&(C.d(1),C=null),_[6]<0?D?D.p(_,v):(D=ae(_),D.c(),D.m(a,Q)):D&&(D.d(1),D=null),_[6]===0?A||(A=_e(),A.c(),A.m(a,null)):A&&(A.d(1),A=null),v&128&&W!==(W=(_[7].x+1)*f-f/2)&&n(N,"cx",W),v&128&&X!==(X=(_[7].y+1)*f-f/2)&&n(N,"cy",X),v&268){U=_[2].cells;let y;for(y=0;y<U.length;y+=1){const j=ue(_,U,y);g[y]?g[y].p(j,v):(g[y]=de(j),g[y].c(),g[y].m(B,null))}for(;y<g.length;y+=1)g[y].d(1);g.length=U.length}v&3&&Y!==(Y="-5 -5 "+(f*_[1]+10)+" "+(f*_[0]+10))&&n(B,"viewBox",Y)},i:oe,o:oe,d(_){_&&c(e),_&&c(M),_&&c(a),C&&C.d(),D&&D.d(),A&&A.d(),_&&c(T),_&&c(B),Ce(g,_),$=!1,se()}}}const f=30;function Me(s,e,l){let t=5,o=5,u=ne(new re(t,o)),r=fe(u),h=new Map,q=1,P=0,M=0;h.set(r[0].id,1);const a={x:r[0].column,y:r[0].row};let k=u.cells[0].distances();const d=()=>{l(0,t+=5),l(1,o+=5),l(2,u=ne(new re(t,o))),l(3,r=fe(u)),h=new Map,l(4,q+=1),h.set(r[0].id,1),r[0].column,r[0].row,l(8,k=u.cells[0].distances())};return[t,o,u,r,q,P,M,a,k,w=>{const i=u.grid[a.y][a.x];w.key==="ArrowRight"&&i.east&&i.linked(i.east)&&l(7,a.x+=1,a),w.key==="ArrowLeft"&&i.west&&i.linked(i.west)&&l(7,a.x-=1,a),w.key==="ArrowDown"&&i.south&&i.linked(i.south)&&l(7,a.y+=1,a),w.key==="ArrowUp"&&i.north&&i.linked(i.north)&&l(7,a.y-=1,a);const m=u.grid[a.y][a.x];i!==m&&(h.has(m.id)?l(6,M=-5):(h.set(m.id,1),l(6,M=3)),l(5,P+=M)),a.x===r[1].column&&a.y===r[1].row&&d()}]}class Le extends be{constructor(e){super(),Ee(this,e,Me,Pe,ge,{})}}export{Le as default};
